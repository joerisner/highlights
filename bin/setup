#!/usr/bin/env bash

# Install `uv` if it doesn't exist, check for specific `uv` configuration,
# and ensure the project's required Python version is installed (using `uv`).

success() { printf "\033[0;32m%s\033[0m\n" "${1}"; }

check_for_uv() {
  if ! command -v uv >/dev/null; then
    printf "\033[0;35mInstalling uv\033[0m\n"
    brew update && brew install uv
  fi
}

check_python_version() {
  # shellcheck disable=SC2155
  local PYTHON_VERSION=$(head -n 1 ".python-version")
  uv python find "${PYTHON_VERSION}" >/dev/null 2>&1 || uv python install --default
}

check_for_uv
check_python_version

printf "\033[0;32m==> Setup complete\033[0m\n"
